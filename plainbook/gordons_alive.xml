<!DOCTYPE chapter SYSTEM "../resources/plainbook/plainbook.dtd" >
<chapter title="Getting ready to exercise the UI" id="chp_gordons_alive">
	<note title="Work in progress">
		<p>This chapter is still being written! Nothing to see here... move along</p>
	</note>
	<p>
		In this chapter we ae going to be covering the basic requirements for testing Web applications in Ruby, Java and DotNet.
		Ruby is up first. Jump ahead to the language of your choice if you are in a hurry.
	</p>
	<section title="Ruby" id="sec_gordons_alive.ruby">
		<section title="Rails" id="sec_gordons_alive.ruby.rails">
			<p>
				If you are at all serious about using cucumber to test Rails sites, then you should get hold of the RSpec Book <bib ref="chelimsky:rspec" />, which
				includes a section discussing BDD outside-in rails development using cucumber in great detail. We will, however, give a very brief overview of the
				basics for Rails 2 here.
			</p>
			<p>
				To use cucumber with rails, you will need the following gems installed on your system:
				<ul>
					<li>rails </li>
					<li>cucumber</li>
					<li>cucumber-rails</li>
					<li>rspec-rails</li>
					<li>webrat</li>
					<li>selenium-client</li>
				</ul>
				Install each of these using ruby gems.
			</p>
			<p>
				Once you have these installed, get things running using the following commands:
			</p>
			<code>
				rails ninjas4Hire
				cd ninjas4Hire
				script/generate rspec
				script/generate cucumber --webrat --rspec
			</code>
			<p>
				You should now be able to run cucumber tests using the command:
			</p>
			<code>rake cucumber</code>
			<p>
				... and get a response like this:
			</p>
			<code>
				0 scenarios
				0 steps
			</code>
		</section>
		<section title="Sinatra" id="sec_gordons_alive.ruby.sinatra">
			<p>
				Due to the fact that Ninjas like to travel light (their deep appreciation of 20th century easy listening crooners is also a factor)
				we will be using Sinatra<footnote><url link="http://www.sinatrarb.com/intro"/></footnote> to illustrate how to use cucumber to support web application development.
			</p>
			<sidebar title="What is Sinatra, Daddio?" id="sb_gordons_alive.sidebar.sinatra">
				<p>
					Sinatra is a lightweight framework for creating web applications using Ruby.
				</p>
				<p>
					As an example, the following is given for a helloworld example on the Sinatra site.
				</p>
				<p>
					Create a ruby file called myapp.rb:
				</p>
				<code>
					# myapp.rb
					require 'sinatra'

					get '/' do
						'Hello world!'
					end
				</code>
				<p>
					Install the sinatra gem
				</p>
				<code>gem install sinatra</code>
				<p>
					Then, run in the directory where you created the file
				</p>
				<code>
					ruby -rubygems myapp.rb
				</code>
				<p>
					View the output by pointing your browser at <code>http://localhost:4567</code>
				</p>
				<p>Pretty hep, no?</p>
			</sidebar>
			<section title="Gordon is alive?!" id="sec_gordons_alive.ruby.cucumber-sinatra">
				<p>
					To get started, we are going to set up a simple sinatra app, and exercise it with cucumber.
					First, create a directory called <code>ninjas4hire</code>, and get a terminal window pointing at the directory.
				</p>
				<p>
					Now add a subdirectory called <code>src</code> and create a file in there called <code>ninjas4hire_app.rb</code>.
					Edit the file, so it looks like the example below.
				</p>
				<code file="ruby/ninjas4hire/src/ninjas4hire_app.rb.001" />
				<p>
					If you haven't done it already, install the sinatra gem.
				</p>
				<code>
					gem install sinatra
				</code>
				<p>
					Now we're going to test that what we have done so far runs. To do this we can use irb.<footnote>Interactive Ruby (see <url
					link="http://www.ruby-lang.org/en/documentation/quickstart/"/> for more info)</footnote> In the terminal window, type
				</p>
				<code>
$ irb
irb(main):001:0> require "src/ninjas4hire_app.rb"
=> true
irb(main):002:0> Ninjas4HireApp.run!
				</code>
				<sidebar title="What did I just do?" id="sb.sinatra.startup">
					<p>
						These commands do three things
						<ol>
							<li>Start the interactive ruby environment</li>
							<li>Load the <code>Ninjas4HireApp</code> class we created in the <code>ninjas4hire_app.rb</code> file</li>
							<li>Run the Sinatra app</li>
						</ol>
					</p>
				</sidebar>
				<p>
					You should see some output like this:
				</p>
				<code>
== Sinatra/1.1.0 has taken the stage on 4567 for development with backup from WEBrick
[2010-11-23 08:38:49] INFO  WEBrick 1.3.1
[2010-11-23 08:38:49] INFO  ruby 1.8.7 (2010-01-10) [i486-linux]
[2010-11-23 08:38:55] INFO  WEBrick::HTTPServer#start: pid=2588 port=4567
				</code>
				<p>
					If you open a browser and navigate to <code>http://localhost:4567/howIsGordon</code> then you should see the
					"up" displayed. You can shut down the irb session by typing <code>Ctrl+C</code> to shut down the app and then
					entering <code>quit</code>
				</p>
			</section>
		</section>
	</section>
	<section title="Java" id="sec_gordons_alive.java">
		<p>
		</p>
	</section>
	<section title="DotNet" id="sec_gordons_alive.dotnet">
		<p>
		</p>
	</section>

</chapter>